logging debug and trace

Finish tests

sort out get img exception handling